<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
     {% load bootstrap3 %}
     {% bootstrap_css %}
     {% bootstrap_javascript %}
     {% bootstrap_messages %}
    <title>This is the test file</title>
    <style type="text/css">
        .a{
            font-family: "Bitstream Vera Sans Mono", Monaco, "Courier New", Courier, monospace;
            font-size: 100px;
        }
    </style>
    <script type="text/javascript">
        function search(){
            var oldTime= $("#oldTime").val();
            var myDate = new Date();
            var nowTime=myDate.getTime();
            if(oldTime!=""){
                if((nowTime-oldTime)/1000<5){
                urp.alert("请勿频繁查询！");
                return;
                }
            }
            $("#oldTime").val(nowTime);
            getBxqkcList(1, "30_sl", true);
        }
	    function getBxqkcList(page,pageSizeVal,conditionChanged){
            if(conditionChanged){
                pageConditions = $("#searchCondition").serialize();
            }
            if(pageSizeVal == undefined){
                pageSizeVal = "30_sl";
                page = "1";
            }
            var parr = (pageSizeVal+"").split("_");
            var pageSize = parseInt(parr[0]);
            var before_html = $("#id-btn-query").html();
            var kclb = $("#kclb").val();
            $.ajax({
                url : "http://zhjwjs.scu.edu.cn/teacher/personalSenate/giveLessonInfo/thisSemesterClassSchedule/getCourseArragementPublic",
                cache : false,
                type : "post",
                data : pageConditions + "&pageNum=" + page + "&pageSize=" + pageSize+ "&kclb=" + kclb,
                dataType : "json",
                beforeSend:function(){
                    $("#id-btn-query").attr("disabled","disabled");
                    $("#id-btn-query").html("<img src=\"/img/icon/loading-btn-01.gif\"> 正在查询...");
                },
                complete:function(){
                    $("#id-btn-query").removeAttr("disabled");
                    $("#id-btn-query").html(before_html);
                },
                success : function(d){
                if(d["pfcx"]=="0"){
                    var div_id = "page_div";
                    urp.pagebar("urppagebar", pageSizeVal, page,d["list"]["pageContext"].totalCount, getBxqkcList,"on", div_id);
                    var isScroll = (pageSizeVal+"").indexOf("_")!=-1 && page!=1?true:false;
                    if(d["list"]["records"] != null && d["list"]["records"] != ""){
                        fillTable(d["list"]["records"],isScroll,page,pageSize);
                    }else{
                        fillTable(null,isScroll,page,pageSize);
                    }
                    }else{
                    urp.alert("请勿频繁查询！");
                    }
                },
                error : function(xhr){
                    urp.alert("错误代码["+xhr.readyState+"-"+xhr.status+"]:获取数据失败！");
                }
            });
        }
    </script>
</head>
<body>
    <div class="row">
        <div class="col-sm-12 self-margin">
            <div id="mainDIV">
                <div class="widget">
                    <h4 class="header smaller lighter grey">
                        <i class="ace-icon fa fa-search">查询条件</i> <!-- <span
                            class="right_top_oper" style="margin: 0px;"><button id="id-btn-query" title="查询"
                                class="btn btn-info btn-xs btn-round"
                                onclick="getBxqkcList(1,'30_sl',true);return false;"><i
                                    class="ace-icon fa fa-search bigger-120"></i>
                                查询</button><label style="color:red;" id="showMsg"></label></span> -->
                    </h4>
                    <div>
                        <!-- 表单开始 -->
                            <form id="searchCondition" action="" method="post">
                                <div class="profile-user-info profile-user-info-striped self">
                                    <div class="profile-info-row">
                                        <div class="profile-info-name">学年学期</div>
                                        <div class="profile-info-value"><select name="zxjxjhh" id="zxjxjhh"
                                                class="select form-control value_element">
                                                <option value="2021-2022-1-1" selected="">2021-2022学年秋</option>
                                            </select>
                                        </div>
                                        <div class="profile-info-name">课程号</div>
                                        <div class="profile-info-value">
                                            <input class="value_element" id="kch" name="kch" type="text">
                                        </div>
                                        <div class="profile-info-name">课程名</div>
                                        <div class="profile-info-value">
                                            <input class="value_element" id="kcm" name="kcm" type="text">
                                        </div>
                                        <div class="profile-info-name">教师</div>
                                        <div class="profile-info-value">
                                            <input class="value_element" id="js" name="js"type="text">
                                        </div>
                                    </div>
                                    <div class="profile-info-row">
                                        <div class="profile-info-name">开课院系</div>
                                        <div class="profile-info-value">
                                            <select class="select value_element" id="kkxs" name="kkxs">
                                                <option value="">全部</option>

                                                <option value="101">艺术学院</option>
                                                <option value="102">
                                                    经济学院</option>
                                                <option value="103">法学院</option>
                                                <option value="104">
                                                    文学与新闻学院</option>
                                                <option value="105">外国语学院</option>
                                                <option value="106">
                                                    历史文化学院（旅游学院）</option>
                                                <option value="107">
                                                    马克思主义学院</option>
                                                <option value="108">国际关系学院</option>
                                                <option value="109">
                                                    哲学系</option>
                                                <option value="201">数学学院</option>
                                                <option value="202">
                                                    物理学院</option>
                                                <option value="203">化学学院</option>
                                                <option value="204">
                                                    生命科学学院</option>
                                                <option value="205">电子信息学院</option>
                                                <option value="300">
                                                    高分子科学与工程学院</option>
                                                <option value="301">
                                                    材料科学与工程学院</option>
                                                <option value="302">机械工程学院</option>
                                                <option value="303">
                                                    电气工程学院</option>
                                                <option value="304">计算机学院</option>
                                                <option value="305">
                                                    建筑与环境学院</option>
                                                <option value="306">水利水电学院</option>
                                                <option value="308">
                                                    化学工程学院</option>
                                                <option value="309">轻工科学与工程学院</option>
                                                <option value="310">
                                                    生物医学工程学院</option>
                                                <option value="311">软件学院</option>
                                                <option value="312">
                                                    匹兹堡学院</option>
                                                <option value="313">空天科学与工程学院</option>
                                                <option value="314">
                                                    网络空间安全学院</option>
                                                <option value="401">公共管理学院</option>
                                                <option value="402">
                                                    商学院</option>
                                                <option value="403">灾后重建与管理学院</option>
                                                <option value="501">
                                                    华西基础医学与法医学院</option>
                                                <option value="502">
                                                    华西临床医学院</option>
                                                <option value="503">华西口腔医学院</option>
                                                <option value="504">
                                                    华西公共卫生学院</option>
                                                <option value="505">华西药学院</option>
                                                <option value="506">
                                                    华西动物中心</option>
                                                <option value="601">联合班</option>
                                                <option value="603">
                                                    吴玉章学院</option>
                                                <option value="604">生物治疗国家重点实验室</option>
                                                <option value="608">
                                                    碳中和技术创新班</option>
                                                <option value="700">研究生院</option>
                                                <option value="701">
                                                    预科教育</option>
                                                <option value="888">体育学院</option>
                                                <option value="900">
                                                    党委武装部（军事教研室）</option>
                                                <option value="901">
                                                    网络教育学院</option>
                                                <option value="902">图书馆</option>
                                                <option value="903">
                                                    分析测试中心</option>
                                                <option value="904">工程设计中心</option>
                                                <option value="905">
                                                    工程训练中心</option>
                                                <option value="906">电子实习中心</option>
                                                <option value="907">
                                                    电工电子中心</option>
                                                <option value="908">化学基础实验教学中心</option>
                                                <option value="909">
                                                    计算机基础教学实验中心</option>
                                                <option value="910">
                                                    招生就业处</option>
                                                <option value="911">校团委</option>
                                                <option value="912">
                                                    心理健康教育中心</option>
                                                <option value="913">国家大学科技园</option>
                                                <option value="914">
                                                    海外教育学院</option>
                                                <option value="915">国际合作与交流处</option>
                                                <option value="918">
                                                    实验室及设备管理处</option>
                                                <option value="919">现代教育技术中心</option>
                                                <option value="920">
                                                    IBM技术中心</option>
                                                <option value="925">文化科技协同创新研发中心</option>
                                                <option value="929">
                                                    出国留学人员培训部</option>
                                                <option value="932">中国西部边疆安全与发展协同创新中心</option>
                                                <option value="993">
                                                    成都美国留学中心</option>
                                                <option value="997">创新教育</option>
                                                <option value="998">
                                                    党委学生工作部（处）</option>
                                                <option value="999">其它
                                                </option>
                                            </select>
                                        </div>
                                        <div class="profile-info-name">上课星期</div>
                                        <div class="profile-info-value">
                                            <select class="value_element" id="skxq" name="skxq">
                                                <option selected="selected" value="">全部</option>
                                                <option value="1">星期一
                                                </option>
                                                <option value="2">星期二</option>
                                                <option value="3">星期三</option>
                                                <option value="4">星期四</option>
                                                <option value="5">星期五</option>
                                                <option value="6">星期六</option>
                                                <option value="7">星期日</option>
                                            </select>
                                        </div>
                                        <div class="profile-info-name">上课节次</div>
                                        <div class="profile-info-value">
                                            <select class="value_element" id="skjc" name="skjc">
                                                <option selected="selected" value="">全部</option>
                                                <option value="1">第1节
                                                </option>
                                                <option value="2">第2节</option>
                                                <option value="3">第3节</option>
                                                <option value="4">第4节</option>
                                                <option value="5">第5节</option>
                                                <option value="6">第6节</option>
                                                <option value="7">第7节</option>
                                                <option value="8">第8节</option>
                                                <option value="9">第9节</option>
                                                <option value="10">第10节</option>
                                                <option value="11">第11节</option>
                                                <option value="12">第12节</option>
                                                <option value="13">第13节</option>
                                                <option value="14">第14节</option>
                                                <option value="15">第15节</option>
                                            </select>
                                        </div>
                                        <div class="profile-info-name">校区</div>
                                        <div class="profile-info-value"><select class="value_element" id="campus"
                                                name="xq">
                                                <option value="">全部</option>

                                                <option value="01">望江</option>
                                                <option value="02">华西
                                                </option>
                                                <option value="03">江安</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="profile-info-row">
                                        <div class="profile-info-name">教学楼
                                        </div>
                                        <div class="profile-info-value">
                                            <select class="value_element" id="jxl" name="jxl">
                                                <option value="">全部</option>
                                            </select>
                                        </div>
                                        <div class="profile-info-name">教室</div>
                                        <div class="profile-info-value"><select class="value_element" id="jas"
                                                name="jas">
                                                <option value="">全部</option>
                                            </select></div>
                                        <div class="profile-info-name">课程类别</div>
                                        <div class="profile-info-value">
                                            <select class="value_element" id="kclb">
                                                <option value="">全部</option>

                                                <option value="3">校外专家开课</option>
                                                <option value="4">
                                                    校外专家+国际周</option>
                                                <option value="1">校级公共课</option>
                                                <option value="2">
                                                    文化素质公选课</option>
                                                <option value="701">社会科学与公共责任</option>
                                                <option value="700">
                                                    人文艺术与中华文化传承</option>
                                                <option value="799">其它
                                                </option>
                                                <option value="702">科学探索与生命教育</option>
                                                <option value="0">
                                                    国家统一课</option>
                                                <option value="5">国际周课程</option>
                                                <option value="704">
                                                    国际事务与全球视野</option>
                                                <option value="703">工程技术与可持续发展</option>
                                                <option value="6">
                                                    东西部联盟课程</option>
                                            </select>
                                        </div>
                                        <div class="profile-info-name"></div>
                                        <div class="profile-info-value">
                                            <button id="id-btn-query" title="查询" class="btn btn-info btn-xs btn-round"
                                                onclick="search();return false;"><i
                                                    class="ace-icon fa fa-search bigger-120"></i>
                                                查询</button><label style="color:red;" id="showMsg"></label>
                                        </div>
                                        <\!-- <div class="profile-info-value">
                                    </div>
                                    <div class="profile-info-value"></div>
                                    <div class="profile-info-value"></div> -->
                                </div>
                    </div>
                    </form>
                    <\!-- 表单结束 -->
                </div>
            </div>
            <div class="widget widget-table">
                <h4 class="header smaller lighter grey"><i class="glyphicon glyphicon-list"></i> 本学期课程安排情况</h4>
                <div align="center" id="page_div" style="overflow: auto;max-height: calc(100vh - 250px)">
                    <table id="sample-table-2" class="table table-striped table-bordered table-hover">
                        <thead>
                            <tr>
                                <th style="border-top:3px solid #ddd;background-color:transparent;">序号</th>
                                <th style="border-top:3px solid #ddd;background-color:transparent;">
                                    开课院系</th>
                                <th style="border-top:3px solid #ddd;background-color:transparent;">课程号</th>
                                <th style="border-top:3px solid #ddd;background-color:transparent;">
                                    课程名</th>
                                <th style="border-top:3px solid #ddd;background-color:transparent;">课序号</th>
                                <th style="border-top:3px solid #ddd;background-color:transparent;">
                                    学分</th>
                                <th style="border-top:3px solid #ddd;background-color:transparent;">课程类别</th>
                                <th style="border-top:3px solid #ddd;background-color:transparent;">
                                    考试类型</th>
                                <th style="border-top:3px solid #ddd;background-color:transparent;">教师</th>
                                <th style="border-top:3px solid #ddd;background-color:transparent;">
                                    周次</th>
                                <th style="border-top:3px solid #ddd;background-color:transparent;">星期</th>
                                <th style="border-top:3px solid #ddd;background-color:transparent;">
                                    节次</th>
                                <th style="border-top:3px solid #ddd;background-color:transparent;">校区</th>
                                <th style="border-top:3px solid #ddd;background-color:transparent;">
                                    教学楼</th>
                                <th style="border-top:3px solid #ddd;background-color:transparent;">教室</th>
                                <th style="border-top:3px solid #ddd;background-color:transparent;">
                                    课容量</th>
                                <th style="border-top:3px solid #ddd;background-color:transparent;">学生数</th>
                                <th style="border-top:3px solid #ddd;background-color:transparent;">
                                    选课限制说明</th>
                                <\!-- <th style="border-top:3px solid #ddd;background-color:transparent;">选课备注</th>
                                    -->
                            </tr>
                        </thead>
                        <tbody id="courseTableBody"></tbody>
                    </table>
                </div>
                <div id="urppagebar"></div>
            </div>
            </div>
            </div>
        </div>
    </div>
</body>
</html>
